# 2019-10-26

'''
    1 <= points.length <= 500
    0 <= points[i][0] <= 40000
    0 <= points[i][1] <= 40000
    Each point is unique.

    更新: 将 判断 p2\p3是否分别在 p2_candidate \ p3_candidate 中
          改为判断p2\p3是否在check(set)中, 减少了时间复杂度， 并且不用不断地创建新数组

    Passed:
    执行用时 : 1688 ms , 在所有 python3 提交中击败了 52.75% 的用户
    内存消耗 : 13.9 MB , 在所有 python3 提交中击败了 14.29% 的用户

'''
class Solution:
    def minAreaRect(self, points: list) -> int:
        '''
            O(n^2)
            return( min_area_of( matrix(p1, p2, p3, p4) ) )
        :param points:
        :return:
        '''

        res = 40010 * 40010 # inf
        table_x = dict() # sorted by x
        check = set()
        for point in points:
            x, y = point
            if table_x.get(x):
                table_x[x].append([x, y])
            else:
                table_x[x] = [[x, y]]
            check.add((x, y))
        #for k, v in table_x.items():
        #    print(k, v)
        # for all p1:
        #       for all p4, s.t. p1.x < p4.x and p1.y < p4.y
        #   p1  p3
        #   p2  p4
        for p1 in points:
            p4s = [p4 for p4 in points if p1[0] < p4[0] and p1[1] < p4[1]]
            for p4 in p4s:
                dx, dy = p4[0] - p1[0], p4[1] - p1[1]
                p2 = (p1[0], p4[1])
                p3 = (p4[0], p1[1])
                if p2 in check and p3 in check:
                        res = min(res, dx * dy)
        # no matrix.
        if res == 40010 * 40010:
            res = 0
        #print(res)
        return res


s = Solution()
'''
assert 4 == s.minAreaRect(points=[[1,1],[1,3],[3,1],[3,3],[2,2]])
assert 2 == s.minAreaRect(points=[[1,1],[1,3],[3,1],[3,3],[4,1],[4,3]])
assert 0 == s.minAreaRect(points=[[1,1],[1,3]])
assert 0 == s.minAreaRect(points=[[i, i] for i in range(500)])
assert 0 == s.minAreaRect(points=[[0, i] for i in range(500)])
assert 0 == s.minAreaRect(points=[[i, 0] for i in range(500)])
assert 0 == s.minAreaRect(points=[])
assert 2 == s.minAreaRect(points=[[0,1],[1,3],[3,3],[4,4],[1,4],[2,3],[1,0],[3,4]])
'''
# correct but timeout.
print(s.minAreaRect(
    points=[[24434,26713],[2369,36795],[12818,36795],[20196,36795],[21555,26713],[39999,26713],[9197,36795],[13402,26713],[20339,36795],[30439,26713],[18798,36795],[29098,36795],[28605,26713],[18383,26713],[24356,36795],[32016,36795],[27833,36795],[2288,26713],[36936,36795],[20034,36795],[34755,36795],[32794,26713],[10676,26713],[1516,26713],[23981,36795],[2288,36795],[32799,26713],[32016,26713],[4188,26713],[37143,26713],[24210,36795],[29048,26713],[6469,36795],[10120,36795],[23677,36795],[3838,36795],[27619,26713],[21262,26713],[35827,36795],[6725,26713],[27619,36795],[16922,36795],[9650,26713],[11480,36795],[3545,26713],[28134,26713],[26716,36795],[16134,36795],[27223,36795],[30379,26713],[8698,36795],[22471,36795],[10186,26713],[21848,26713],[4863,36795],[35225,36795],[28004,26713],[20034,26713],[6909,26713],[21640,26713],[18371,26713],[5697,36795],[12260,36795],[1111,36795],[35069,36795],[14145,26713],[17415,36795],[3727,26713],[38003,36795],[3722,26713],[4583,26713],[8484,26713],[25687,26713],[13248,26713],[10349,26713],[1582,26713],[37209,26713],[2975,36795],[23993,36795],[5131,36795],[38108,36795],[17143,36795],[10874,36795],[4877,26713],[23090,36795],[33171,26713],[7531,36795],[28932,26713],[20074,26713],[25097,36795],[19756,36795],[36647,36795],[10130,36795],[31225,36795],[21640,36795],[18383,36795],[19182,36795],[25925,26713],[25329,26713],[10874,26713],[316,36795],[10060,26713],[31575,36795],[28932,36795],[18073,36795],[28157,26713],[3838,26713],[10120,26713],[10614,26713],[30403,26713],[13270,36795],[27160,36795],[14145,36795],[9235,36795],[30047,36795],[8324,26713],[27601,26713],[5697,26713],[29269,36795],[29065,26713],[30783,36795],[6155,26713],[6936,36795],[8698,26713],[36936,26713],[25219,26713],[7823,36795],[16485,26713],[1500,36795],[25328,26713],[35906,36795],[16922,26713],[13270,26713],[15401,36795],[10614,36795],[9604,36795],[31513,36795],[14524,36795],[21713,36795],[25711,36795],[31513,26713],[14186,26713],[1028,26713],[4427,36795],[17855,26713],[34027,26713],[22802,26713],[29962,26713],[29678,36795],[37190,26713],[9197,26713],[38205,26713],[30562,36795],[10676,36795],[10967,26713],[30046,36795],[3913,36795],[32794,36795],[27982,36795],[32742,26713],[7991,36795],[11252,26713],[20465,36795],[29269,26713],[26716,26713],[14798,26713],[36647,26713],[9235,26713],[225,26713],[4752,26713],[13402,36795],[6415,26713],[15470,26713],[22802,36795],[18073,26713],[4877,36795],[34530,26713],[23661,36795],[22908,26713],[15470,36795],[13248,36795],[35828,26713],[2369,26713],[10349,36795],[6936,26713],[4732,36795],[294,36795],[17224,26713],[32993,26713],[4583,36795],[17415,26713],[14798,36795],[17730,36795],[30996,36795],[26429,36795],[17874,26713],[27982,26713],[6811,26713],[31225,26713],[22032,26713],[38455,36795],[19838,26713],[21195,26713],[3395,26713],[9121,26713],[29678,26713],[33171,36795],[18026,26713],[22471,26713],[6346,36795],[3665,26713],[4273,36795],[28471,26713],[12072,26713],[23993,26713],[10053,26713],[37209,36795],[38539,26713],[28956,26713],[23674,26713],[19677,36795],[37470,36795],[19034,26713],[38003,26713],[38539,36795],[35334,36795],[6487,36795],[28212,26713],[10060,36795],[6346,26713],[20074,36795],[4273,26713],[16485,36795],[17079,36795],[3665,36795],[31267,36795],[35208,26713],[34779,36795],[23981,26713],[35225,26713],[12496,36795],[21195,36795],[30783,26713],[17079,26713],[9807,36795],[25332,26713],[10130,26713],[19756,26713],[27160,26713],[23510,36795],[3545,36795],[30047,26713],[25936,26713],[6504,36795],[6487,26713],[13083,36795],[23090,26713],[30439,36795],[35827,26713],[19677,26713],[7240,36795],[9473,26713],[22376,26713],[3727,36795],[39925,36795],[28471,36795],[1987,36795],[31010,36795],[37415,36795],[19182,26713],[25936,36795],[25925,36795],[33672,36795],[19785,26713],[38455,26713],[3392,36795],[14273,26713],[27833,26713],[25711,26713],[20465,26713],[12496,26713],[26429,26713],[26548,36795],[19785,36795],[15380,26713],[26645,36795],[20339,26713],[29962,36795],[31010,26713],[37524,36795],[8500,26713],[25467,36795],[22240,26713],[9650,36795],[21555,36795],[1028,36795],[1582,36795],[35334,26713],[14186,36795],[34027,36795],[2975,26713],[4427,26713],[21082,36795],[4188,36795],[5846,36795],[38624,36795],[9604,26713],[21713,26713],[13146,26713],[26645,26713],[24210,26713],[29065,36795],[17883,26713],[9526,26713],[1516,36795],[36839,36795],[13656,36795],[22032,36795],[6155,36795],[4863,26713],[10967,36795],[38205,36795],[15616,36795],[31267,26713],[3143,36795],[3065,26713],[8324,36795],[24237,36795],[11480,26713],[38624,26713],[27601,36795],[34755,26713],[28241,26713],[7823,26713],[21262,36795],[294,26713],[2308,26713],[28956,36795],[6725,36795],[13656,26713],[12818,26713],[29048,36795],[24434,36795],[6503,26713],[6469,26713],[7991,26713],[14514,26713],[9807,26713],[3734,36795],[30823,36795],[32799,36795],[4752,36795],[25329,36795],[3395,36795],[5452,36795],[6183,26713],[17730,26713],[32742,36795],[33672,26713],[3446,26713],[13146,36795],[17883,36795],[27136,26713],[14247,36795],[18798,26713],[14067,36795],[1987,26713],[37190,36795],[19034,36795],[7531,26713],[4732,26713],[21082,26713],[28157,36795],[28812,36795],[17855,36795],[316,26713],[5452,26713],[39999,36795],[19417,36795],[22908,36795],[2308,36795],[22376,36795],[5131,26713],[34530,36795],[8500,36795],[31575,26713],[7240,26713],[37524,26713],[25467,26713],[23510,26713],[8484,36795],[3278,36795],[25759,36795],[3722,36795],[15380,36795],[6504,26713],[27136,36795],[26548,26713],[3446,36795],[14247,26713],[25328,36795],[12260,26713],[6183,36795],[31982,26713],[14273,36795],[28004,36795],[10186,36795],[30562,26713],[10687,26713],[35208,36795],[3913,26713],[3734,26713],[29810,36795],[30823,26713],[34885,26713],[30379,36795],[7279,36795],[39858,26713],[6503,36795],[19417,26713],[25687,36795],[37470,26713],[14524,26713],[6415,36795],[13083,26713],[39858,36795],[24374,36795],[35906,26713],[35069,26713],[12072,36795],[1500,26713],[15401,26713],[25332,36795],[29810,26713],[39925,26713],[15616,26713],[24237,26713],[3143,26713],[22111,36795],[25219,36795],[6909,36795],[19838,36795],[9526,36795],[34779,26713],[36839,26713],[24356,26713],[22111,26713],[17143,26713],[28212,36795],[27223,26713],[24374,26713],[29098,26713],[17224,36795],[30403,36795],[5846,26713],[23674,36795],[7279,26713],[18371,36795],[20196,26713],[23677,26713],[1111,26713],[22240,36795],[32993,36795],[10053,36795],[28812,26713],[3065,36795],[34885,36795],[37143,36795],[9121,36795],[31982,36795],[10687,36795],[36779,36795],[23661,26713],[18026,36795],[21848,36795],[30996,26713],[6811,36795],[3392,26713],[9473,36795],[17874,36795],[30046,26713],[36779,26713],[25097,26713],[28605,36795],[28241,36795],[3278,26713],[225,36795],[14514,36795],[37415,26713],[16134,26713],[14067,26713],[35828,36795],[25759,26713],[28134,36795],[38108,26713],[11252,36795]]
))
